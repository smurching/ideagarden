
<!--tabs-->
<div id="content">
    <ul id="tabs" class="nav nav-tabs" data-tabs="tabs">
        <li class="active"><a href="#idea_details" data-toggle="tab">Idea Details</a></li>
        <li><a href="#public_comments" data-toggle="tab">Public Comments</a></li>
     <% if logged_in? %>
     <% if @idea_posting.users.exists?(current_user.id) || current_user.teacher || current_user.admin %>    
        <li><a href="#private_comments" data-toggle="tab">Private Comments</a></li>
     <%end%>
     <%end%>
    </ul>

    <div id="my-tab-content" class="tab-content">
    	
    	<!--public comments-->
        <div class="tab-pane" id="public_comments">
			<h2>Feedback</h2>

			<div class="feedback" id ="existing_feedback"><%= render @idea_posting.public_feedbacks %></div> 
			<br/>
			<p>----------------------------</p>

			<% if logged_in? %>
				<h2>Add feedback</h2>
				<%= form_for([@idea_posting, @idea_posting.feedbacks.new], :remote => true, :id => "public_feedback_form") do |f| %>
				    <%= f.text_area :body, :id => "feedback_body", :style => "width:95%;" %><br /><br />
				    <%= f.hidden_field :topic, :value => true%>
				    <%= f.submit 'Provide feedback' %>
				<% end %>
			<% end %>
	
        </div>
        
        <!--private comments-->
      	<% if logged_in? %>
        <% if @idea_posting.users.exists?(current_user.id) || current_user.teacher || current_user.admin %>        
        <div class="tab-pane" id="private_comments">
  
					<h2>Private Discussion</h2>
					<div id="existing_private_feedback">
						<%= render @idea_posting.private_feedbacks%>
					</div>
					<p>----------------------------</p>
		
					<h2>Add private feedback</h2>
					<%= form_for([@idea_posting, @idea_posting.feedbacks.new], :remote => true, :id => "private_feedback_form") do |f| %>
					    <%= f.text_area :body, :id => "private_feedback_body", :style => "width:95%;" %><br />
					    <%= f.hidden_field(:private, :value => true)%>
					    <%= f.hidden_field :topic, :value => true%>    
					    <%= f.submit 'Provide feedback' %>
					<% end %>
					

        </div>
		<% end %> 
		<%end%>        
        
        
        <!--posting details-->
        <div class="tab-pane active" id="idea_details">
            <%= render @idea_posting %>
        </div>
        
    </div>
</div>

<script>

$(function(){
	
	$('.nav-tabs > li').click(function(){
		var id = $(this).children("a").attr("href").slice(1);
		
		$('.nav-tabs > li').attr("class", "");
		$('.tab-pane').hide();
		
		$(this).attr("class", "active");
		$('.tab-pane[id="'+id+'"]').show();
		
				
	});

});
</script>



