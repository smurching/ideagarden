<%
## Called when a topic is clicked - shows the topic and its child posts, hides the topic creation form
## Binds the clicking of a tab or the back button to a function undoing said changes
%>

$('.new_feedback').hide();


<%if @feedback.private%>

$('#existing_private_feedback').html("<%= j render @feedback %>");

$('#back_to_topic_list, a[data-toggle="tab"]').off("click").click(function(){
	$('#existing_private_feedback').html("<%= j render :partial => 'idea_postings/topics_list', :locals => {:feedbacks => @idea_posting.private_feedbacks} %>");	
	console.log("refreshing topics list");
	$('.new_feedback').show();	
});




<%else%>
$('#existing_feedback').html("<%= j render @feedback %>");

$('#back_to_topic_list, a[data-toggle="tab"]').off("click").click(function(){
	$('#existing_feedback').html("<%= j render :partial => 'idea_postings/topics_list', :locals => {:feedbacks => @idea_posting.public_feedbacks} %>");	
	$('.new_feedback').show();	
});

<%end%>
